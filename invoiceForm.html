<script type="text/javascript" src="/js/invoice.js"></script>
<form action="invoiceView" method="post">
  <input type="hidden" id="partnerkey" name="partnerkey" value="{{ v.partner.key }}"/>
  <label for="alldates">All Dates:</label><input type="checkbox" class="invoice" name="alldates" id="alldates" checked="checked"/>
  <label for="invoiced">Include Invoiced:</label><input type="checkbox" class="invoice" name="invoiced" id="invoiced"/>  <label for="start_date">Start</label><input type="text" class="datepicker invoice" name="start_date" id="start_date" value="{% now "Y-m" %}-1"/>
  <label for="end_date">End</label><input type="text" class="datepicker invoice" name="end_date" id="end_date" value="{% now "Y-m-t" %}"/>

  <table>
    <thead>
      <tr>
	<th>Volunteer</th><th>Project</th><th>Site</th><th>Start</th><th>End</th><th>Price</th><th>Discount</th><th>Item Price</th><th>Invoiced</th><th>Include</th>
      </tr>
    </thead>
    <tbody id="items">
      {% for a in v.assignments %}
      <tr>
	<td>{{ a.volunteer.lname }}, {{ a.volunteer.fname }}</td>
	<td>{{a.project.name }}</td>
	<td>{{ a.site.name }}</td>
	<td>{{ a.start_date_str }}</td>
	<td>{{ a.end_date_str }}</td>
	<td>{{ a.project.price }}</td>
	<td>{{ a.discount }}</td>
	<td>{{ a.item_price }} -{{ a.invoiced }}-</td>
	<td></td>
	<td><input type="checkbox" id="{{ a.key }}" name="akey:{{ a.key }}"/></td>
      </tr>
      {% endfor %}
      <tr>
	<td colspan='7'></td><td>{{ v.total }}</td>
      </tr>
    </tbody>
  </table>
  <input type="submit" value="Create Invoice"/>
</form>

